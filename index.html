<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="utf-8">
    <title>Download example</title>
</head>
<body>
    <textarea name="bodyOfFile" id="bodyOfFile" cols="60" rows="20"></textarea><br>
    <button type="button" id="exportIcal">
        export ical
    </button>
    <button type="button" id="clearTextarea">
        clear
    </button>
    <script type="text/javascript">

        function download(filename, content) {

            if (filename == '' || filename == null || typeof filename === 'undefined') {
                return;
            } else if (!content.length || typeof content != 'string') {
                return;
            }

            var e = document.createElement('a');
                e.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(content));
                e.setAttribute('download', filename + '.ics');
                e.style.display = 'none';
                document.body.appendChild(e);
                e.click();
                document.body.removeChild(e);
        }

        var btnExport = document.getElementById('exportIcal'),
            btnClear = document.getElementById('clearTextarea');

        btnExport.addEventListener('click', function () {
            var time = new Date().getTime();
            var content = document.getElementById('bodyOfFile').value;
            download(`${time}_hostogether.ics`, content);
        });

        btnClear.addEventListener('click', function () {
            document.getElementById('bodyOfFile').value = '';
        });

        // https://ourcodeworld.com/articles/read/189/how-to-create-a-file-and-generate-a-download-with-javascript-in-the-browser-without-a-server

    </script>
</body>
</html>
